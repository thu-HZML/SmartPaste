# 需求原型与交互设计文档

## 1. 全局交互逻辑 

### 1.1 应用形态

- **常驻形态：** 桌面右下角桌宠
- **功能形态：** 可呼出的独立窗口（剪贴板历史列表、设置页、AI对话框）
- **后台形态：** 系统托盘图标

### 1.2 桌宠行为逻辑

- **待机 ：** 播放随机动画（眨眼、环顾）
- **输入反馈**
  - **鼠标跟随：** 视线随鼠标移动
  - **键盘跟随：** 捕捉到键盘敲击时，播放“敲击/记录”动画
- **状态反馈（待实现）：**
  - **复制成功：** 瞬间播放“开心/记录”动画 + 气泡提示“已捕获”
  - **同步中：** 播放“传输/忙碌”动画
  - **隐私拦截：** 播放“警示/护盾”动画

![image-20260101150556344](C:\Users\mayuchen\AppData\Roaming\Typora\typora-user-images\image-20260101150556344.png)

------

## 2. 功能模块原型与交互设计

### 2.1 核心入口：桌宠交互 

- **单击桌宠：** 呼出 **[主菜单]**
  - 设计： 采用圆形辐射菜单或气泡式列表，围绕桌宠展开
  - 菜单项： 个人中心、历史记录、收藏夹、AI、云端、设置
- **右键桌宠（待定）：** 呼出系统级菜单（退出应用、锁定位置、隐藏桌宠）

<img src="C:\Users\mayuchen\AppData\Roaming\Typora\typora-user-images\image-20260101150625257.png" alt="image-20260101150625257" style="zoom: 80%;" />

### 2.2 核心功能：剪贴板历史界面 

这是用户最高频使用的界面：

- **呼出方式：** 全局快捷键（如 `Ctrl+Shift+V`）或通过桌宠菜单
- **布局结构：**
  - **顶部栏：** 搜索框（支持多种格式搜索）、时间轴设置
  - **次顶部栏：**分类标签（全部/文本/图片/文件）、收藏夹入口、锁定/删除/设置等快捷功能
  - **主列表区：** 瀑布流或列表展示历史记录卡片
  - **底部栏（待定）：** 批量操作栏（仅在多选时出现）、当前记录统计
- **卡片设计：**
  - **内容预览：** 文本显示前4行；图片显示缩略图；文件显示图标+路径
  - **元数据：** 来源应用图标、复制时间、设备来源（云同步标识）、内容统计
  - **卡片交互 ：**
    - 悬停卡片聚焦效果
    - **收藏**：
      - 单击： 加入“默认”收藏夹
      - 双击/长按： 弹出收藏夹选择列表（复选框）
    - **复制**：点击即复制到系统剪贴板
    - **编辑**：进入详情编辑模式
    - **备注**：弹出气泡输入备注
    - **删除**：删除该记录
    - **OCR**：如果是图片则有
- **多选交互：** 按住 `Shift` 单击多个卡片

<img src="C:\Users\mayuchen\AppData\Roaming\Typora\typora-user-images\image-20260101150655701.png" alt="image-20260101150655701" style="zoom:67%;" />

### 2.3 详情与编辑界面

- **进入方式：** 点击卡片上的“编辑”
- **文本模式：** 弹窗文本编辑器
- **图片模式：**
  - 单击：原图预览。
  - OCR：查看/编辑OCR结果

### 2.4 AI Agent 智能助手 

- **主动提问**

  - 入口：桌宠气泡
  - 界面：类似ChatGPT的对话窗口
  - 交互：用户复制内容 -> 用户输入问题 -> 气泡/窗口输出答案。

- **基于剪贴板内容的被动处理（待定）**

  - 入口：在历史记录卡片上右键 -> 选择 `[AI 处理]` -> `[总结/翻译/搜索]`.
  - 反馈：处理结果直接以“新卡片”形式插入历史记录顶部，或弹窗显示。

  <img src="C:\Users\mayuchen\AppData\Roaming\Typora\typora-user-images\image-20260101150801370.png" alt="image-20260101150801370" style="zoom:80%;" />

### 2.5 用户与设置

- **个人中心 ：**
  - 用户单击主菜单头像或者用户名则可跳转到用户个人信息页面
- **通用设置** **：**
  - 管理应用的生命周期与基础交互体验（开机自启/托盘交互/生命周期管理）
- **快捷键设置：**
  - **全局响应**：支持注册全局快捷键，用户点击输入框即可捕获当前按下的组合键，支持冲突检测与 ESC 取消
- **剪贴板参数设置：**
  - 精细化的数据采集与存储策略控制，包括容量限制、智能过滤、交互优化
-  **AI Agent 设置：**
  - 多模态/多模型支持，内置了 DeepSeek、豆包、Kimi、GLM 等主流模型，还支持 OpenAI/Google 及 自定义 Base URL
  - 个性化调优：用户可控制 AI 生成内容的严谨度或发散度
  - **场景化应用**：开启后，用户可直接对刚复制的内容进行提问、总结或翻译，实现“复制即处理”的智能工作流
- **安全与隐私：**
  - **敏感词库：** 列表管理。添加“密码”、“身份证”等关键词
  - **隐私日志：** 展示被拦截的记录
- **数据备份：**
  - **自定义存储**：允许用户修改数据存储路径（如迁移至非系统盘）
  - **离线迁移**：提供完整的导出与导入功能，

- **云端入口：**
  - **状态可视化**：实时显示上次同步时间与当前同步状态（同步中/已完成）
  - **策略控制**：
    - **同步频率**：支持从“实时（每30秒）”到“每小时”的多级同步策略
    - **手动触发**：提供立即同步按钮，解决多端数据延迟问题
  - **零信任安全**：**端到端加密 (E2EE)**

<img src="C:\Users\mayuchen\AppData\Roaming\Typora\typora-user-images\image-20260101150726617.png" alt="image-20260101150726617" style="zoom: 67%;" />

------

## 3. 核心流程图 

### 3.1 复制与捕获流程

```
	A[用户在任意App执行复制] --> B{应用是否运行?}
    B -- 是 --> C[桌宠监听后台]
    C --> D{内容安全检查}
    D -- 含敏感词 --> E[标记为隐私/拦截上传]
    D -- 安全 --> F[存入本地数据库]
    F --> G{开启了OCR & 图片?}
    G -- 是 --> H[后台执行OCR识别]
    G -- 否 --> I[结束]
    H --> J[更新数据库中OCR字段]
    L --> M{开启自动同步?}
    M -- 是 --> N[加密并上传云端]
    L --> P{开启ai助手?}
    P -- 是 --> Q[弹出ai助手窗口]
    Q --> R{用户可提问}
```

### 3.2 搜索与检索流程

```
	A[用户快捷键呼出界面] --> B[输入关键词]
    B --> C{检索引擎}
    C --> D[匹配文本内容]
    C --> E[匹配OCR识别文字]
    C --> F[匹配文件路径/名称]
    C --> G[匹配备注信息]
    D & E & F & G --> H[聚合结果列表]
    H --> I[显示]
```

------

## 4. 特殊边界情况设计 

1. **离线状态下的AI功能（待定）：**
   - 当网络断开时，点击AI功能，桌宠应显示“晕倒/断网”表情，并提示“AI功能需要联网哦”。
2. **大文件复制：**
   - 若复制了超过设定大小（如500MB）的文件在记录中仅保存路径，不进行云同步。
3. **密钥丢失：**
   - 若用户开启端到端加密后在新设备登录且忘记密钥，系统提供“重置数据”选项

